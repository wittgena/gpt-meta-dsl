# @나.dsl – 전체 정의 (v0.6 기준)

## 개요

@나.dsl은 인간의 사고 흐름을 GPT가 재현할 수 있도록 하는 메타 DSL로서,  
자연어 → 구조화된 흐름 → 실행 가능한 DAG의 과정을 자동화하고, 자기 평가와 판단 흐름을 구성하는 데 목적이 있다.

정의:

```
@나.dsl = 흐름 기반 (flow-driven) 메타 DSL 설계자 + 자기반사형 판단 흐름 실험자
```

---

## 1. 핵심 요소

| DSL 지시어 | 설명 |
|------------|------|
| `+dag` | 자연어를 실행 흐름으로 구조화, DAG 형태로 판단과 실행 분리 |
| `+val` | 어떤 대상이나 실행 결과를 평가 (Validation) |
| `+critic` | 흐름 또는 출력물에 대해 비판적으로 분석 |
| `+intuition` | 수치/논리 근거 없이 직관 기반 판단 요청 |
| `+reason` | 판단 또는 흐름의 이유를 자연어로 명시 |
| `+judge` | 반복 흐름의 종료조건 또는 판단 조건 명시 |
| `@gpt.entropy` | 응답의 다양성, 위상, 리듬 기반 판단 평가 |
| `@phase` | 현재 흐름의 위상 또는 단계 구분자 |
| `@flowEntry` | DSL 흐름의 진입점 |
| `@na.dsl` | 내부 리듬 및 판단 규칙 세트 |
| `@na.dsl.dag` | +dag 특화 흐름 구조의 최소 사양 정의 |
| `@na.dsl.min` | 가장 경량화된 DSL 실행 구조 |
| `@critic.auto` | 흐름에 대한 자동 비판 흐름 모드 |
| `@__this.trace()` | 전체 흐름 트레이싱 |
| `@__this.diff()` | 흐름 간 차이점 비교 |

---

## 2. 실행 방식

- **자기반사형 흐름**: GPT가 자신의 응답을 분석하고 보완하는 재귀적 사고 흐름
- **리듬 기반 추론**: 수치가 아닌 흐름의 변화량으로 조건을 평가
- **두뇌 vs 실행 분리**: GPT-4o → 판단자, GPT-3.5 → 실행자
- **자동 반복 제한**: +judge 또는 @max 조건 자동 설정됨

---

## 3. 예시 흐름

```dsl
+dag:
자연어를 보고 흐름을 구성하고, 논리적 비약이 있는지 +critic 한다.
+reason
@phase(2)
@flowEntry("자연어 입력 → 구조화 → 평가 → 보완")
+judge: 요약 길이 변화량이 20% 이상일 때 반복 종료
```

---

## 4. 활용 예시

- 자기 성찰 자동화 (`+critic`, `+intuition`, `+val`)
- GPT 기반 PR 리뷰 흐름 구성
- GPT 기반 글쓰기/디버깅/리팩토링 자동화
- LangGraph 또는 Assistant API 기반 실행기와 결합 가능
